---
title: 64MB
description: This is an interesting article
publishDate: 2026-01-24T00:00:00.000Z
tags:
  - typecho
ogImage: /arch.jpg
---
<!-- hash: 9yeqfo -->

> This article is machine-translated.

# 64MB NAT VPS Deploying Typecho Blogs Full Tutorial

IPv6 + Cloudflare + Caddy + PHP-FPM + SQLite

---

## I. Preamble

Quite a few NAT VPS configurations are quite extreme:
- 64MB RAM
- IPv4 only ports
- Provides full IPv6
- Average performance, but cheap and stable

This kind of machine:
- Docker is basically a non-starter
- MySQL eats memory
- WordPress blows up easily

But with the right choice of tech stack:
**Alpine + Caddy + PHP-FPM + SQLite + Typecho**.
64MB can also run stably for a long time.
This is a complete documentation of a real-world project from 0 to live.

---

## II. Overall structure

Browser
↓ HTTPS
Cloudflare (IPv6, Orange Cloud)
↓ HTTPS
Caddy (443)
↓ FastCGI
PHP-FPM (127.0.0.1:9000)
↓
Typecho + SQLite

### Component selection rationale

| Components | Reasons |
|----|----|
| Alpine | Minimalistic, memory-saving |
| Caddy | Automatic HTTPS, easy configuration |
| PHP-FPM | Less than Apache/Nginx + mod_php |
| SQLite | Single file database |
| Typecho | The lightest Chinese blog |

---

##3, Preconditions

### Server

- Alpine Linux
- ≥ 512MB disk
- Full IPv6
- NAT IPv4 (can be ignored)

### Cloudflare

- DNS: AAAA → VPS IPv6
- Status: Proxied (Orange Cloud)
- SSL/TLS: Full or Full (strict)

!!! Don't use Flexible (it redirects infinitely)

---

## IV. System Initialization & Swap

### Update the system

```
apk update
apk upgrade
```

Enable swap (anti-OOM)

```
dd if=/dev/zero of=/swapfile bs=1M count=256
chmod 600 /swapfile
mkswap /swapfile
swapon /swapfile
echo '/swapfile none swap sw 0 0' >> /etc/fstab
```

swap is a life saver, not a speed booster.

## V. Installing PHP-FPM (Extreme Configuration)
Installing PHP and extensions
ðŸ "ðŸ "ðŸ "ðŸ "ðŸ "ðŸ "ñ
apk add \
php83 php83-fpm php83-pdo php83-pdo_sqlite php83-sqlite3 \
php83-json php83-mbstring php83-xml php83-curl php83-gd \
php83-ctype php83-session php83-tokenizer php83-fileinfo
ðŸ "ðŸ "ðŸ "ðŸ "ðŸ "ðŸ "ñ
Starting services

```
rc-update add php-fpm83
rc-service php-fpm83 start
```
限制进程数（关键）

```
sed -i 's/^pm = .*/pm = static/' /etc/php83/php-fpm.d/www.conf
sed -i 's/^pm.max_children = .*/pm.max_children = 1/' /etc/php83/php-fpm.d/www.conf
rc-service php-fpm83 restart
```
64MB 只能跑 1 个 PHP worker，不限必炸。

## Six, install Caddy ##

```
apk add caddy
rc-update add caddy
```
## 七、部署 Typecho
创建目录
```
mkdir -p /var/www/typecho
cd /var/www/typecho
```
下载官方版本

```
apk add unzip
wget https://github.com/typecho/typecho/releases/download/v1.2.1/typecho.zip
unzip typecho.zip
rm -f typecho.zip
```
设置权限

```
chown -R nobody:nobody /var/www/typecho/usr
chmod -R 755 /var/www/typecho
```
PHP-FPM 默认以 nobody 运行：

```
ps -o user,group,comm -C php-fpm83
```
## 八、配置 Caddy

```
cat > /etc/caddy/Caddyfile <<'EOF'
your-domain.example {
    root * /var/www/typecho
    encode gzip
    php_fastcgi 127.0.0.1:9000
    file_server
}
EOF
```
启动并验证：

```
caddy validate --config /etc/caddy/Caddyfile
rc-service caddy start
```
确认监听：

```
ss -lntp | grep ':443'
```
## 九、安装 Typecho
浏览器访问：
https://你的域名
数据库配置：
类型：SQLite
前缀：typecho_
路径：默认自动生成即可

## X. Manually creating config.inc.php (common pitfalls)
When automatic creation fails:

```
cat > /var/www/typecho/config.inc.php <<'EOF'
<?php
define('__TYPECHO_ROOT_DIR__', dirname(__FILE__));
define('__TYPECHO_PLUGIN_DIR__', '/usr/plugins');
define('__TYPECHO_THEME_DIR__', '/usr/themes');
define('__TYPECHO_ADMIN_DIR__', '/admin/');
require_once __TYPECHO_ROOT_DIR__ . '/var/Typecho/Common.php';
\Typecho\Common::init();
$db = new \Typecho\Db('Pdo_SQLite', 'typecho_');
$db->addServer(array (
  'file' => '/var/www/typecho/usr/你的数据库文件.db',
), \Typecho\Db::READ | \Typecho\Db::WRITE);
\Typecho\Db::set($db);
EOF
```
权限修正：

```
chown nobody:nobody /var/www/typecho/config.inc.php
chmod 644 /var/www/typecho/config.inc.php
```
至此，一个 64MB Alpine NAT VPS + IPv6 的 Typecho 博客就稳定跑起来了。
你可以访问：[64MB](https://64mb.qqwx.de/)来查看
